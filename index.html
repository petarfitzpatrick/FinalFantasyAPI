<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Character Searcher - FFXIV</title>
	<link rel="stylesheet" type="text/css" href="./css/style.css">
	<link href='https://fonts.googleapis.com/css?family=Hind|Montserrat:400,700' rel='stylesheet' type='text/css'>

	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script src="src/lodestoneapi.js"></script>
	
	
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	
</head>
<body>
	
	<div id = "wrapper">
		
		<div id="header">
			<a id="headlink" href="./index.html">Character Searcher</a>
		</div>




		<div id = "navcontainer">
			<ul id = "navlist">
				<li><a href="./index.html" id="active">Home Page</a></li>
			</ul>
		</div>

		<div id="content">
			
		<img style="float:right;" src="./media/dalamud.png" alt="FFXIV Logo" width="200px"/>


			<article>

				<form id="character">
				<fieldset>
					<legend>Search Character:</legend>
					<input name="name" id="name" type="text" value="Zeno Nalno" placeholder="Character Name or ID">
					<select name="server" id="server">
						<option value="Adamantoise">Adamantoise</option>
						<option value="Aegis">Aegis</option>
						<option value="Alexander">Alexander</option>
						<option value="Anima">Anima</option>
						<option value="Asura">Asura</option>
						<option value="Atomos">Atomos</option>
						<option value="Bahamut">Bahamut</option>
						<option value="Balmung">Balmung</option>
						<option value="Behemoth">Behemoth</option>
						<option value="Belias">Belias</option>
						<option value="Brynhildr">Brynhildr</option>
						<option value="Cactuar">Cactuar</option>
						<option value="Carbuncle">Carbuncle</option>
						<option value="Cerberus">Cerberus</option>
						<option value="Chocobo">Chocobo</option>
						<option value="Coeurl">Coeurl</option>
						<option value="Diabolos">Diabolos</option>
						<option value="Durandal">Durandal</option>
						<option value="Excalibur">Excalibur</option>
						<option value="Exodus">Exodus</option>
						<option value="Faerie">Faerie</option>
						<option value="Famfrit">Famfrit</option>
						<option value="Fenrir">Fenrir</option>
						<option value="Garuda">Garuda</option>
						<option value="Gilgamesh">Gilgamesh</option>
						<option value="Goblin">Goblin</option>
						<option value="Gungnir">Gungnir</option>
						<option value="Hades">Hades</option>
						<option value="Hyperion">Hyperion</option>
						<option value="Ifrit">Ifrit</option>
						<option value="Ixion">Ixion</option>
						<option value="Jenova">Jenova</option>
						<option value="Kujata">Kujata</option>
						<option value="Lamia">Lamia</option>
						<option value="Leviathan">Leviathan</option>
						<option value="Lich">Lich</option>
						<option value="Malboro">Malboro</option>
						<option value="Mandragora">Mandragora</option>
						<option value="Masamune">Masamune</option>
						<option value="Mateus">Mateus</option>
						<option value="Midgardsormr">Midgardsormr</option>
						<option value="Moogle">Moogle</option>
						<option value="Odin">Odin</option>
						<option value="Pandaemonium">Pandaemonium</option>
						<option value="Phoenix">Phoenix</option>
						<option value="Ragnarok">Ragnarok</option>
						<option value="Ramuh">Ramuh</option>
						<option value="Ridill">Ridill</option>
						<option value="Sargatanas">Sargatanas</option>
						<option value="Shinryu">Shinryu</option>
						<option value="Shiva">Shiva</option>
						<option value="Siren">Siren</option>
						<option value="Tiamat">Tiamat</option>
						<option value="Titan">Titan</option>
						<option value="Tonberry">Tonberry</option>
						<option value="Typhon">Typhon</option>
						<option value="Ultima">Ultima</option>
						<option value="Ultros" selected>Ultros</option>
						<option value="Unicorn">Unicorn</option>
						<option value="Valefor">Valefor</option>
						<option value="Yojimbo">Yojimbo</option>
						<option value="Zalera">Zalera</option>
						<option value="Zeromus">Zeromus</option>
						<option value="Zodiark">Zodiark</option>
					</select>
					<input type="submit">
				</fieldset>
			</form>
			
			<pre style="text-align:center; clear: both" id="data"></pre>
				
			<div id="chart_div"></div>
			
			<div id="chart2_div"></div>
			
			<div id="chart3_div"></div>
				
			</article>
			
			


			
			<footer>
			
			</footer>
		</div>
		

		
	</div>

</body>
</html>
<script>
$(function drawBasic() {

    var $results = $('#results'),
        $data = $('#data');

    // handle form submit
    $('form#character').on('submit', function(e)
    {
		
		console.log("IT IS " + localStorage.getItem("name"));
		localStorage.setItem("name", $(this).find('#name').val().trim());
		console.log("IT IS " + localStorage.getItem("name"));
		
        e.preventDefault();

        var name = $(this).find('#name').val().trim(),
            server = $(this).find('#server').val().trim();

        $data.text('Searching for: ' + name + ' on the server: ' + server);

        // Lodestone Search
        LodestoneAPI.Search.Character(name, server, function(Character)
        {
            if (Character)
            {
                console.log('Found:', Character);

                // print data
                $data.empty();
                $data.append('<h2>' + Character.name +' - '+ Character.world +'</h2><br>');
				$data.append('<img style="text-align:center;" src=' +Character.portrait + '><br>');
				$data.append('<p>Free Company: ' + Character.freeCompany + '<p>');
				$data.append('<p>Race: ' + Character.race + ' - ' + Character.clan + '<p><br>');
	//function drawBasic() {

	  //CHART 1 DATA
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Class');
      data.addColumn('number', 'Class Level');

      data.addRows([
        [Character.classjobs[0].name, Number(Character.classjobs[0].level)],
		[Character.classjobs[1].name, Number(Character.classjobs[1].level)],
		[Character.classjobs[2].name, Number(Character.classjobs[2].level)],
		[Character.classjobs[3].name, Number(Character.classjobs[3].level)],
		[Character.classjobs[4].name, Number(Character.classjobs[4].level)],
		[Character.classjobs[5].name, Number(Character.classjobs[5].level)],
      ]);

	  //CHART 1 OPTIONS
      var options = {
		colors: ['#9f2637'],
        title: 'Class Level for Disciple of War',
		textStyle:{
			fontSize: 10
		},
        hAxis: {
          title: 'Class',
          viewWindow: {
            min: [7, 30, 0],
            max: [17, 30, 0]
          }
        },
        vAxis: {
          title: 'Class Level',
		  viewWindow: {
			  max: 60
		  }
        }
      };
	  
	  //CHART 2 DATA
      var data2 = new google.visualization.DataTable();
      data2.addColumn('string', 'Class');
      data2.addColumn('number', 'Class Level');

      data2.addRows([
        [Character.classjobs[6].name, Number(Character.classjobs[6].level)],
		[Character.classjobs[7].name, Number(Character.classjobs[7].level)],
		[Character.classjobs[8].name, Number(Character.classjobs[8].level)],
      ]);

	  //CHART 2 OPTIONS
      var options2 = {
		colors: ['#9f2637'],
        title: 'Class Level for Disciple of Magic',
		textStyle:{
			fontSize: 10
		},
        hAxis: {
          title: 'Class',
          viewWindow: {
            min: [7, 30, 0],
            max: [17, 30, 0]
          }
        },
        vAxis: {
          title: 'Class Level',
		  viewWindow: {
			  max: 60
		  }
        }
      };
	  
	  //CHART 3 DATA
      var data3 = new google.visualization.DataTable();
      data3.addColumn('string', 'Class');
      data3.addColumn('number', 'Class Level');

      data3.addRows([
        [Character.classjobs[9].name, Number(Character.classjobs[9].level)],
		[Character.classjobs[10].name, Number(Character.classjobs[10].level)],
		[Character.classjobs[11].name, Number(Character.classjobs[11].level)],
      ]);

	  //CHART 3 OPTIONS
      var options3 = {
		colors: ['#9f2637'],
        title: 'Class Level for Heavensward Classes',
		textStyle:{
			fontSize: 10
		},
        hAxis: {
          title: 'Class',
          viewWindow: {
            min: [7, 30, 0],
            max: [17, 30, 0]
          }
        },
        vAxis: {
          title: 'Class Level',
		  viewWindow: {
			  max: 60
		  }
        }
      };

      var chart = new google.visualization.ColumnChart(
        document.getElementById('chart_div'));
      chart.draw(data, options);
	  
	  var chart2 = new google.visualization.ColumnChart(
        document.getElementById('chart2_div'));
      chart2.draw(data2, options2);
	  
	  var chart3 = new google.visualization.ColumnChart(
        document.getElementById('chart3_div'));
      chart3.draw(data3, options3);

      // fin
      return;
            }

            $data.html('Could not find character');
        });
    });
});



/*
REFERENCE FOR CHART

function drawBasic() {

      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Class');
      data.addColumn('number', 'Class Level');

      data.addRows([
        ['Archer', 1],
		['Gladiator', 1],
		['Lancer', 1],
		['Marauder', 1],
		['Pugilist', 1],
		['Rogue', 1],
		//['Arcanist', 1],
		//['Conjurer', 1],
		//['Thaumaturge', 1],
		//['Dark Knight', 1],
		//['Machinist', 1],
		//['Astrologian', 1],
      ]);

      var options = {
        title: 'Class Level per Base Class',
		textStyle:{
			fontSize: 10
		},
        hAxis: {
          title: 'Class',
          viewWindow: {
            min: [7, 30, 0],
            max: [17, 30, 0]
          }
        },
        vAxis: {
          title: 'Class Level'
        }
      };

      var chart = new google.visualization.ColumnChart(
        document.getElementById('chart_div'));

      chart.draw(data, options);
    }
	*/

//Code Below is what initializes the chart

function initialize () {
	//$('form#character').on('submit', function(e)
    $('form#character').on('submit', function(e) {
        drawBasic();
		console.log("Got here");
    });
}

google.load('visualization', '1', {packages: ['corechart', 'bar']});
google.setOnLoadCallback(initialize);

</script>
